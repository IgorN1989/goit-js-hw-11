{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAUA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,cACpCG,gBAAiBJ,SAASC,cAAc,sBAEpCI,EAAoB,IAAI,EAAAC,EAAAC,mBACxBC,EAAkB,IAAIC,EAAAb,GAAJ,CAAmB,aAAc,CACvDc,aAAc,MACdC,aAAc,MAEhB,IAAIC,EAAmB,EAoBvBC,eAAeC,IACb,IACE,MAAMC,QAAaV,EAAkBW,cAC/BC,EAAYF,EAAKE,UACjBC,EAASH,EAAKI,KAEpB,IAAKD,EAAOE,OAIV,YAHAC,EAAAC,OAAOC,QACL,6EA4BR,SAA6BL,GAC3BpB,EAAKI,QAAQsB,mBAAmB,aAAa,EAAAC,EAAAC,cAAaR,G,CAxBxDS,CAAoBT,GAEfN,EAuCT,WACE,MAAQgB,OAAQC,GAAe7B,SAC5BC,cAAc,YACd6B,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CA3CRC,GAFAf,EAAAC,OAAOe,QAAQ,oBAAoBpB,aAKrCL,GAAoBM,EAAOE,OAEvBR,EAAmBK,EACrBqB,EAAYxC,EAAKK,aAEjBoC,EAAYzC,EAAKK,Y,CAEnB,MAAOqC,GACPnB,EAAAC,OAAOmB,QAAQ,sD,CAChB,QACCF,EAAYzC,EAAKM,iBACjBI,EAAgBkC,S,EAcpB,SAASH,EAAYI,GACnBA,EAAQC,UAAUC,IAAI,Y,CAGxB,SAASP,EAAYK,GACnBA,EAAQC,UAAUE,OAAO,Y,CArE3BhD,EAAKC,KAAKgD,iBAAiB,UAG3B,SAAkBC,GAKhB,GAJAA,EAAIC,iBAsDN,WACEnD,EAAKI,QAAQgD,UAAY,GACzBtC,EAAmB,EACnB2B,EAAYzC,EAAKK,Y,CAxDjBgD,GAEA9C,EAAkB+C,MAAQJ,EAAIK,cAAcC,SAASC,YAAYC,OAC5DnD,EAAkB+C,MAErB,YADA/B,EAAAC,OAAOmC,KAAK,oCAIdpD,EAAkBqD,YAClBpB,EAAYxC,EAAKM,iBACjBU,G,IAdFhB,EAAKK,YAAY4C,iBAAiB,QAASjC","sources":["src/js/load-more-btn.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport { PixabayApiService } from './pixabay-service';\nimport { createMarkup } from './markup';\n\n// ===================================================================\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loaderContainer: document.querySelector('.loader-container'),\n};\nconst pixabayApiService = new PixabayApiService();\nconst galleryLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet totalShownImages = 0;\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', loadImages);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  clearGallery();\n\n  pixabayApiService.query = evt.currentTarget.elements.searchQuery.value;\n  if (!pixabayApiService.query) {\n    Notify.info('Please, enter your search query.');\n    return;\n  }\n\n  pixabayApiService.resetPage();\n  showElement(refs.loaderContainer);\n  loadImages();\n}\n\nasync function loadImages() {\n  try {\n    const data = await pixabayApiService.fetchImages();\n    const totalHits = data.totalHits;\n    const images = data.hits;\n\n    if (!images.length) {\n      Notify.warning(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    appendGalleryMarkup(images);\n\n    if (!totalShownImages) {\n      Notify.success(`Hooray! We found ${totalHits} images.`);\n    } else {\n      smoothScroll();\n    }\n\n    totalShownImages += images.length;\n\n    if (totalShownImages < totalHits) {\n      showElement(refs.loadMoreBtn);\n    } else {\n      hideElement(refs.loadMoreBtn);\n    }\n  } catch (err) {\n    Notify.failure('Oops! Something went wrong! Try reloading the page!');\n  } finally {\n    hideElement(refs.loaderContainer);\n    galleryLightbox.refresh();\n  }\n}\n\nfunction appendGalleryMarkup(images) {\n  refs.gallery.insertAdjacentHTML('beforeend', createMarkup(images));\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n  totalShownImages = 0;\n  hideElement(refs.loadMoreBtn);\n}\n\nfunction hideElement(element) {\n  element.classList.add('is-hidden');\n}\n\nfunction showElement(element) {\n  element.classList.remove('is-hidden');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$fZKcF","parcelRequire","$19a565c91edb3dc2$var$refs","form","document","querySelector","gallery","loadMoreBtn","loaderContainer","$19a565c91edb3dc2$var$pixabayApiService","$iAt1l","PixabayApiService","$19a565c91edb3dc2$var$galleryLightbox","$parcel$interopDefault","captionsData","captionDelay","$19a565c91edb3dc2$var$totalShownImages","async","$19a565c91edb3dc2$var$loadImages","data","fetchImages","totalHits","images","hits","length","$iQIUW","Notify","warning","insertAdjacentHTML","$3huUq","createMarkup","$19a565c91edb3dc2$var$appendGalleryMarkup","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$19a565c91edb3dc2$var$smoothScroll","success","$19a565c91edb3dc2$var$showElement","$19a565c91edb3dc2$var$hideElement","err","failure","refresh","element","classList","add","remove","addEventListener","evt","preventDefault","innerHTML","$19a565c91edb3dc2$var$clearGallery","query","currentTarget","elements","searchQuery","value","info","resetPage"],"version":3,"file":"load-more-btn.7990aa07.js.map"}